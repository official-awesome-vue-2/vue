import{g as u,an as h,al as C,N as g,h as d,o as p,w as m,r as f,k as s,ao as v,ac as z,G as _,as as S,R as x,q as w,v as A,n as y,A as $,z as R,ap as B}from"./CwA_Bfwi.js";const[k,I]=C("AvatarRoot"),L=u({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(t){return h(),I({imageLoadingStatus:g("loading")}),(a,e)=>(p(),d(s(v),{"as-child":a.asChild,as:a.as},{default:m(()=>[f(a.$slots,"default")]),_:3},8,["as-child","as"]))}});function b(t,a){const e=g("idle"),o=g(!1),l=r=>()=>{o.value&&(e.value=r)};return z(()=>{o.value=!0,_([()=>t.value,()=>a==null?void 0:a.value],([r,c])=>{if(!r)e.value="error";else{const n=new window.Image;e.value="loading",n.onload=l("loaded"),n.onerror=l("error"),n.src=r,c&&(n.referrerPolicy=c)}},{immediate:!0})}),S(()=>{o.value=!1}),e}const j=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(t,{emit:a}){const e=t,o=a,{src:l,referrerPolicy:r}=x(e);h();const c=k(),n=b(l,r);return _(n,i=>{o("loadingStatusChange",i),i!=="idle"&&(c.imageLoadingStatus.value=i)},{immediate:!0}),(i,M)=>w((p(),d(s(v),{role:"img","as-child":i.asChild,as:i.as,src:s(l),"referrer-policy":s(r)},{default:m(()=>[f(i.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[A,s(n)==="loaded"]])}}),D=u({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(t){const a=t;return(e,o)=>(p(),d(s(L),{class:y(s($)(s(q)({size:e.size,shape:e.shape}),a.class))},{default:m(()=>[f(e.$slots,"default")]),_:3},8,["class"]))}}),E=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{}},setup(t){const a=t;return(e,o)=>(p(),d(s(j),R(a,{class:"size-full object-cover"}),{default:m(()=>[f(e.$slots,"default")]),_:3},16))}}),q=B("inline-flex shrink-0 select-none items-center justify-center overflow-hidden bg-secondary font-normal text-foreground",{variants:{size:{sm:"size-10 text-xs",base:"size-16 text-2xl",lg:"size-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{D as _,E as a};
